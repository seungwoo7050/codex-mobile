# VERSIONING.md

This document defines the version roadmap for the Android client.

## 1. Global rules

- Version format: MAJOR.MINOR.PATCH (e.g., 0.1.0)
- 0.x.y:
  - iterative client features
  - contract is assumed stable per snapshot under `contracts/`
- Each change set MUST target exactly one version below.

## 2. Roadmap overview (client)

- v0.1.0 – Skeleton + contract gates + health smoke
- v0.2.0 – Auth + token storage + profile
- v0.3.0 – Replays list + replay detail
- v0.4.0 – Export requests + jobs list/detail (REST)
- v0.5.0 – Job progress via WebSocket + download result
- v1.0.0 – Portfolio-ready hardening

## 3. v0.1.0 – Skeleton + contract gates + health smoke (완료)

Status: ✅ 기본 스켈레톤, 계약 게이트, 헬스 스모크 테스트 구현 및 통과

Scope:
- Android app skeleton (Compose + navigation)
- Settings screen:
  - configure REST base URL (for emulator/device)
- Contract gate tests:
  - contracts files must exist
  - openapi contains at least /api/health
- Health smoke:
  - call /api/health and show result in UI

Completion criteria:
- Unit tests pass
- Contract gate tests pass
- No binaries committed (including PNG launcher icons)
- Minimal CLONE_GUIDE.md (Korean) is generated by agent in this version

## 4. v0.2.0 – Auth + token + profile

Status: ✅ 로그인/회원가입/로그아웃, 토큰 보관/인터셉터, 내 프로필 GET/PUT 구현 및 테스트 완료

Scope:
- Register/login/logout
- Token persistence (DataStore)
- Profile:
  - GET /api/users/me
  - PUT /api/users/me
- Basic 401 handling:
  - force logout + show login

Completion criteria:
- Tests for:
  - login success
  - login 401
  - token interceptor adds header

## 5. v0.3.0 – Replays list + detail

Status: ✅ 리플레이 목록/상세 UI, 파싱, 페이징/빈/에러 상태 테스트 완료

Scope:
- GET /api/replays (paging)
- GET /api/replays/{replayId}
- UI:
  - list screen + detail screen
- Error handling:
  - empty state
  - paging error

Completion criteria:
- API tests for both endpoints
- UI state tests for paging

## 6. v0.4.0 – Export requests + jobs list/detail (REST)

Status: ✅ 내보내기 요청 및 잡 목록/상세 REST UI와 테스트 완료

Scope:
- POST /api/replays/{replayId}/exports/mp4
- POST /api/replays/{replayId}/exports/thumbnail
- GET /api/jobs (paging/filter)
- GET /api/jobs/{jobId}
- UI:
  - export action in replay detail
  - jobs list screen
  - job detail screen

Completion criteria:
- Tests:
  - export request returns jobId
  - jobs list parsing
  - job detail parsing
- No “invented” fields outside openapi

## 7. v0.5.0 – Job progress via WebSocket + download

Status: ✅ WebSocket 진행률/재연결/다운로드 구현 및 테스트 완료

Scope:
- WebSocket connect:
  - ws://<host>:8080/ws/jobs?token=<JWT>
- Handle event types:
  - job.connected
  - job.progress
  - job.completed
  - job.failed
- UI:
  - progress UI updates live
  - on completion, enable download button
- Download:
  - GET /api/jobs/{jobId}/result (stream)
  - store in app storage

Completion criteria:
- WS tests (MockWebServer)
- Reconnect + REST reconcile rule documented in Korean (CLONE_GUIDE or design note)
- Failure flows tested (disconnect, duplicate events, job.failed)

## 8. Portfolio submission milestones (recommended)

- Entry-level submission point:
  - v0.3.0 (auth + replay browse)
- Junior transfer submission point:
  - v0.5.0 (async job lifecycle + WS progress + download)
- Mid transfer submission point:
  - v1.0.0 (hardening + docs + stronger tests)

## 9. v1.0.0 – Portfolio-ready hardening

Scope:
- Improve resilience:
  - retry/backoff tuning
  - offline handling for last known data
- Improve test coverage on critical flows:
  - login -> replay list -> export -> progress -> download
- Documentation:
  - CLONE_GUIDE.md (Korean) fully reproducible
  - short architecture notes (Korean)

Completion criteria:
- All tests pass reliably
- Docs are sufficient for reviewer to run and validate flows
- No binary commits